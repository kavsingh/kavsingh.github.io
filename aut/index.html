<head><style>body,html{width:100%;height:100%;padding:0;margin:0}body{display:flex;flex-direction:column;min-height:100vh}.centered-children{display:flex;align-items:center;justify-content:center}.main{position:relative;margin-top:60px;z-index:2}.worlds{display:flex;cursor:pointer}.thumbnails{height:60px;pointer-events:none;opacity:0;transform:translateY(-20%);transition:all .2s ease-out;cursor:pointer}.world:nth-child(n){transform:rotate(180deg)}.world:nth-child(2n){transform:rotate(0)}.main:hover .thumbnails{opacity:1;transform:translateY(0);pointer-events:initial}.snapshot-button{width:1.3em;height:1.3em;cursor:pointer;position:absolute;bottom:2em;left:50%;transform:translateX(-50%)}.snapshot-button svg{fill:#000}.github-link{width:1em;height:1em;position:absolute;top:2em;right:2em}.github-link svg{fill:#888}</style><script>(function(){"use strict";var e={enumerable:!1,configurable:!1,writable:!1},t={enumerable:!0,configurable:!1},n={enumerable:!1,configurable:!0,writable:!1},l=this.Symbol.toStringTag,r=this.Object.defineProperty,o={},i=l;e.value="Module",r(o,i,e),e.value=!0,r(o,"__esModule",e);var c=["001","000"],a=(e,t,n)=>c.includes(`${e}${t}${n}`)?1:0;t.get=function(){return a},r(o,"rule3",t);var u=["100","001"],h=(e,t,n)=>u.includes(`${e}${t}${n}`)?1:0;t.get=function(){return h},r(o,"rule18",t);var d=["101","011","010","000"],g=(e,t,n)=>d.includes(`${e}${t}${n}`)?1:0;t.get=function(){return g},r(o,"rule45",t);var s=["101","100","011","000"],v=(e,t,n)=>s.includes(`${e}${t}${n}`)?1:0;t.get=function(){return v},r(o,"rule57",t);var m=["110","011","000"],f=(e,t,n)=>m.includes(`${e}${t}${n}`)?1:0;t.get=function(){return f},r(o,"rule73",t);var w=["001","100","011","001"],b=(e,t,n)=>w.includes(`${e}${t}${n}`)?1:0;t.get=function(){return b},r(o,"rule90",t);var $=e=>{if(!e)return[];const t=S(Math.floor(e/2)).map(()=>0);return e%2==0?t.slice(0,-1).concat(1).concat(t):t.concat(1).concat(t)},p=["111","101"],M=(e,t,n)=>p.includes(`${e}${t}${n}`)?1:0;t.get=function(){return M},r(o,"rule160",t);var E=["111","101","100","010","001"],D=(e,t,n)=>{const l=Array.from(e),r=Math.min(Math.floor(window.innerWidth/l.length),300),i={cellDim:2,worldDim:r,rules:Object.values(o),evolver:void 0,world:[$(r/2)]};((e,t,n=40)=>{const l=e.map(R(n));return l.forEach(({element:e})=>{t.appendChild(e)}),l})(i.rules,t).forEach(({element:e,evolver:t})=>{e.addEventListener("click",()=>{i.evolver=t})}),l.forEach(e=>e.addEventListener("click",()=>{i.evolver=void 0})),A(i,l),n.addEventListener("click",()=>{C("snapshot.svg",i)})},y=(e,t,n)=>E.includes(`${e}${t}${n}`)?1:0;t.get=function(){return y},r(o,"rule182",t);var A=(e,t)=>{const n=F(q(e.rules),B,H(a),T),l=()=>e.evolver||n(),r=O(t,{cellDim:e.cellDim,width:e.worldDim,height:e.worldDim}),o=Math.floor(e.worldDim/(2*t.length));let i=0,c=l();const u=()=>{r(e.world),window.requestAnimationFrame(u)};setInterval(()=>{i=i>=o?0:i+1,c=0===i?l():c,e.world=c(e.world)},14),window.requestAnimationFrame(u)},C=(e,t)=>{const n=document.createElementNS("http://www.w3.org/2000/svg","svg"),l=document.createElement("a");P([n],{width:t.worldDim,height:t.worldDim,cellDim:t.cellDim})(t.world);const r=URL.createObjectURL(new Blob([n.outerHTML],{type:"image/svg+xml;charset=utf-8"}));l.href=r,l.download=e,document.body.appendChild(l),l.click(),document.body.removeChild(l)},N=["111","110","101","000"],x=(e,t,n)=>N.includes(`${e}${t}${n}`)?1:0;t.get=function(){return x},r(o,"rule225",t);var S=e=>Array.from({length:e},(e,t)=>t),j=e=>(...t)=>t.length>=e.length?e(...t):j(e.bind(null,...t)),L=e=>e&&e instanceof CanvasRenderingContext2D,O=(e,{width:t=200,height:n=200,cellDim:l=2,fillColor:r="#000000",fillMode:o="active"})=>{const[i,...c]=e,a=i.getContext("2d"),u=c.map(e=>e.getContext("2d")).filter(L);if(!L(a))throw new Error("could not create drawing context");const h=Math.floor(n/l),d=k(G("inactive"===o?0:1)),g=(e,t)=>{const n=d(e);for(let e=0;e<n.length;e++){const r=n[e],o=K(r),i=I(r);void 0!==o&&void 0!==i&&a.fillRect(o*l,t,r.length*l,l)}};return Object.assign(i,{width:t,height:n}),e.forEach(e=>Object.assign(e,{width:t,height:n})),e=>{[a,...u].forEach(e=>{e.clearRect(0,0,t,n),e.fillStyle=r});for(let t=Math.max(0,e.length-h);t<e.length;t++)g(e[t],n-(e.length-t)*l);u.forEach(e=>e.drawImage(i,0,0))}},k=(...e)=>e.length>=J.length?J(...e):j(J.bind(null,...e)),R=e=>t=>{const n=document.createElement("canvas"),l=O([n],{cellDim:1,width:e,height:e}),r=T(t);return l(S(e).reduce(e=>r(e),[U(e)])),{evolver:r,element:n}},F=(e,...t)=>(...n)=>t.reduce((e,t)=>t(e),e(...n)),T=e=>t=>{const n=t[t.length-1],l=W(e,n);return t.concat([z(n,l)?U(n.length):l])},q=e=>()=>e,B=e=>e[Math.floor(Math.random()*e.length)],H=(...e)=>e.length>=_.length?_(...e):j(_.bind(null,...e)),I=e=>e[e.length-1],U=e=>S(e).map(()=>Math.floor(2*Math.random())),_=(e,t)=>Y(t)?e:t,P=(e,{width:t=200,height:n=200,cellDim:l=2,fillColor:r="#000000",fillMode:o="active"})=>{const i=Math.floor(n/l),c=k(G("inactive"===o?0:1)),a=(t,n)=>{const o=c(t),i=document.createDocumentFragment();for(let e=0;e<o.length;e++){const t=o[e],c=K(t),a=I(t);if(void 0!==c&&void 0!==a){const e=document.createElementNS("http://www.w3.org/2000/svg","rect");e.setAttributeNS(null,"x",`${c*l}`),e.setAttributeNS(null,"y",`${n}`),e.setAttributeNS(null,"width",`${t.length*l}`),e.setAttributeNS(null,"height",`${l}`),e.setAttributeNS(null,"fill",r),i.appendChild(e)}}e.forEach(e=>{e.appendChild(i.cloneNode(!0))})};return e.forEach(e=>{e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e.setAttribute("viewBox",`0 0 ${t} ${n}`)}),t=>{e.forEach(e=>{e.innerHTML=""});for(let e=Math.max(0,t.length-i);e<t.length;e++)a(t[e],n-(t.length-e)*l)}},W=(e,t)=>{const n=Q(t.length);return t.map((l,r)=>e(t[n(r-1)],t[r],t[n(r+1)]))},z=(...e)=>e.length>=X.length?X(...e):j(X.bind(null,...e)),G=(...e)=>e.length>=V.length?V(...e):j(V.bind(null,...e)),J=(e,t)=>{const n=[];for(let l=0;l<t.length;l++){if(!e(t[l]))continue;const r=I(n);r&&I(r)===l-1?r.push(l):n.push([l])}return n},K=e=>e[0];n.value=1,r(k,"length",n);var Q=(...e)=>e.length>=Z.length?Z(...e):j(Z.bind(null,...e)),V=(e,t)=>e===t,X=(e,t)=>{if(G(e,t))return!0;if(ee(e)&&ee(t))return!0;if(te(e)&&te(t)){const[n,l]=[e,t].map(Object.keys);return n.length===l.length&&n.every(n=>z(e[n],t[n]))}return!1},Y=e=>null==e;n.value=1,r(G,"length",n);var Z=(e,t)=>(t%e+e)%e;n.value=1,r(Q,"length",n);var ee=e=>Number.isNaN(e),te=e=>"object"==typeof e;n.value=1,r(z,"length",n),n.value=2,r(F,"length",n),n.value=1,r(H,"length",n),n.value="main",r(D,"name",n),this.bootApp=D}).call(this);</script></head><body class="centered-children"><div class="main"><div class="worlds centered-children"><canvas class="world"></canvas><canvas class="world"></canvas><canvas class="world"></canvas></div><div class="thumbnails centered-children"></div></div><div class="snapshot-button" role="button"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" style="width:100%;height:100%"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M20 4h-3.17L15 2H9L7.17 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h4.05l1.83-2h4.24l1.83 2H20v12zM12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zm0 8c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"/></svg></div><a class="github-link" href="https://github.com/kavsingh/cellular-automaton" target="_blank"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40" style="width:100%;height:100%"><g><path d="m20 0c-11 0-20 9-20 20 0 8.8 5.7 16.3 13.7 19 1 0.2 1.3-0.5 1.3-1 0-0.5 0-2 0-3.7-5.5 1.2-6.7-2.4-6.7-2.4-0.9-2.3-2.2-2.9-2.2-2.9-1.9-1.2 0.1-1.2 0.1-1.2 2 0.1 3.1 2.1 3.1 2.1 1.7 3 4.6 2.1 5.8 1.6 0.2-1.3 0.7-2.2 1.3-2.7-4.5-0.5-9.2-2.2-9.2-9.8 0-2.2 0.8-4 2.1-5.4-0.2-0.5-0.9-2.6 0.2-5.3 0 0 1.7-0.5 5.5 2 1.6-0.4 3.3-0.6 5-0.6 1.7 0 3.4 0.2 5 0.7 3.8-2.6 5.5-2.1 5.5-2.1 1.1 2.8 0.4 4.8 0.2 5.3 1.3 1.4 2.1 3.2 2.1 5.4 0 7.6-4.7 9.3-9.2 9.8 0.7 0.6 1.4 1.9 1.4 3.7 0 2.7 0 4.9 0 5.5 0 0.6 0.3 1.2 1.3 1 8-2.7 13.7-10.2 13.7-19 0-11-9-20-20-20z"/></g></svg></a><script>window.bootApp(
			document.querySelectorAll('.world'),
			document.querySelector('.thumbnails'),
			document.querySelector('.snapshot-button'),
		)</script></body>